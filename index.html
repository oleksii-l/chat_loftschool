<!DOCTYPE html>
<html lang="ru">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link href="css/main.css" rel="stylesheet">
    <title>Chat</title>
</head>

<body>

    <div id="autorization" class="autorization">
        <div class="autorization__img-wrapper">
            <img src="img/logo.png" alt="" class="autorization__img">
        </div>
        <div class="autorization-form">
            <h2 class="autorization-form__title">Авторизация</h2>
            <div class="autorization-form__desc">
                Введите пожалуйста своё фио и ник для дальнейшей авторизации
            </div>
            <form id="autorization-form" class="form">
                <input type="text" name="name" class="form__input" placeholder="Введите свое фио" required>
                <input type="text" name="nick" class="form__input" placeholder="Введите свой ник" required>
                <button id="enterchat" type="submit" class="form__btn">войти</button>
            </form>
        </div>
    </div>

    <div id="chat" class="chat">
        <div class="chat__aside">
            <div class="search">
                <div id="user-info-btn" class="user__btn"></div>
                <input type="text" class="search__input" placeholder="Найти...">
            </div>
            <ul id="member-list" class="members__list">
                <!-- current members will be here -->
            </ul>
        </div>
        <div class="chat__content">
            <div class="chat__title">
                <div class="chat__name">Чат</div>
                <div id="chat_mem_num" class="chat__num">0 участника</div>
            </div>
            <ul id="chat-messages" class="messages">
                <!--Chat messages will be inserted here-->
            </ul>
            <div class="chat__footer">
                <form class="chat__form" action="">
                    <input id="chat_message" class="chat__input" type="text" placeholder="Введите сообщение...">
                    <button id="send-message" class="chat__btn" type="submit">Отправить</button>
                </form>
            </div>
        </div>
    </div>

    <div id="user-info" class="load-photo">
        <!--user info will be here-->
    </div>

    <div id="upload-photo" class="profile">
        <!-- profile will be here -->
    </div>

    <script id="chatMessage" type="text/x-handlebars-template">
        <li class="messages__item {{first}} {{right}}">
            <div class="messages__img-wrap">
                <img src="{{img}}" data-nick="{{nick}}" class="messages__img">
            </div>
            <div class="messages__name">{{name}}</div>
            <div class="messages_content">
                <div class="messages__text">{{text}}</div>
                <div class="messages__time">{{time}}</div>
            </div>
        </li>
    </script>

    <script id="chatMembers" type="text/x-handlebars-template">
        {{#each members}}
        <li class="members__item">
            <div class="members__img-wrapper">
                <img src="{{this.img}}" data-nick="{{this.nick}}" class="members__img">
            </div>
            <div class="members__content">
                <div class="members__name">{{this.name}}</div>
                <div class="members__last-message">{{this.last_message}}</div>
            </div>
        </li>
        {{/each}}
    </script>

    <script id="profileTemplate" type="text/x-handlebars-template">
        <div class="profile__img-wrapper">
            <img id="profile__img" src="{{img}}" data-nick="{{nick}}" class="profile__img">
        </div>
        <input type="file" id="file" accept="image/*">
        <div class="profile__desc">Выберите изображение или перетащите его на форму (Изображение в формате jpg и размер менее 512кб)</div>
        <div class="profile__buttons">
            <button id="profile-btn-cancel" class="profile__btn">Отмена</button>
            <button id="profile-btn-save" class="profile__btn">Сохранить</button>
        </div>
    </script>

    <script id="userInfoTemplate" type="text/x-handlebars-template">
        <div class="load-photo__title">
            Загрузка фото
        </div>
        <div class="load-photo__main">
            <div id='photo-upload-btn' class="load-photo__img-wrapper">
                <img src="{{img}}" data-nick="{{nick}}" class="load-photo__img">
            </div>
            <div class="load-photo__content">
                <div class="load-photo__name">
                    {{name}}
                </div>
                <div class="load-photo__status">В сети</div>
            </div>
        </div>
        <div id="close" class="cross"></div>
    </script>

    <script src="https://cdn.jsdelivr.net/npm/handlebars@latest/dist/handlebars.js"></script>
    <script src="./src/js/client-socket.js"></script>

</body>

</html>